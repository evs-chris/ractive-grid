{"version":3,"file":"ractive-grid.js","sources":["../src/index.js"],"sourcesContent":["/* global Ractive */\n\nvar templateTable = `<table class='ractive-grid' on-keydown='selection' tabindex='0'|>\n  <thead>\n    <tr>{{#.headers:i}}<th on-click='headerClicked:{{i}}' class='{{#(sortDir(i) === 1)}}header-sort-asc{{/}}{{#(sortDir(i) === 2)}}header-sort-desc{{/}}'>{{.}}</th>{{/}}</tr>\n  </thead>\n  <tbody>\n    {{#.rendered}}\n      {{#.itemsView:i}}\n        <tr on-click='rowClicked:{{i}}' on-dblclick='rowDoubleClicked:{{i}}' class='{{#isCurrentRow(i)}}current{{/}}'>{{>tableRow}}</tr>\n      {{/}}\n    {{/}}\n  </tbody>\n</table>`;\n\nvar templateDiv = `<div class='ractive-grid' on-keydown='selection' tabindex='0'|>\n  <div class='rg-header'>{{#.headers:i}}<div on-click='headerClicked:{{i}}' class='{{#(sortDir(i) === 1)}}header-sort-asc{{/}}{{#(sortDir(i) === 2)}}header-sort-desc{{/}} {{columnClass(i)}}'>{{.}}</div>{{/}}</div>\n  <div class='rg-body'>\n    {{#.rendered}}\n      {{#.itemsView:i}}\n        <div class='rg-row{{#isCurrentRow(i)}} current{{/}}' on-dblclick='rowDoubleClicked:{{i}}' on-click='rowClicked:{{i}}' >{{>divRow}}</div>\n      {{/}}\n    {{/}}\n  </div>\n</div>`;\nvar getProp = function getProp(obj, path) {\n  if (!path) return '';\n  var parts = path.split('.');\n  for (var i = 0; i < parts.length; i++) {\n    if (!!!obj) return obj;\n    var p = parts[i];\n    obj = obj[p];\n  }\n  return obj;\n};\n\nvar Grid;\nGrid = Ractive.extend({\n  template: '{{>.type}}',\n  onconstruct(opts) {\n    var transfer = ['class', 'style', 'id'];\n    var str = '';\n    for (var k in opts.data) if (transfer.indexOf(k) >= 0) str += ' ' + k + '=\"' + opts.data[k] + '\"';\n    opts.partials = {};\n    opts.partials.table = templateTable.replace(/\\|/, str);\n    opts.partials.div = templateDiv.replace(/\\|/, str);\n    opts.data.sorts = { order: [] };\n    opts.data.type = opts.data.type || 'table';\n  },\n  onrender() {\n    var grid = this;\n    grid.on('rowDoubleClicked', function(e, i) {\n      grid.fire('rowSelected', grid.get('itemsView.' + i), i, e);\n    });\n    grid.on('rowClicked', function(e, i) {\n      grid.set('currentIndex', i);\n    });\n    grid.on('selection', function(e) {\n      var current = grid.get('currentIndex');\n      if (typeof current !== 'number') return;\n      var items = grid.get('itemsView');\n      if (e.original.keyCode === 38 && current > 0) current--;\n      else if (e.original.keyCode === 40) current++;\n      else if (e.original.keyCode === 13) {\n        grid.fire('rowSelected', grid.get('current'), current, e);\n        e.original.preventDefault();\n        return;\n      }\n      else return;\n      e.original.preventDefault();\n      grid.current(current);\n    });\n    grid.on('colDoubleClicked', function(e, arr) {\n      grid.fire('colSelected', e, grid.get('itemsView.' + arr[0]), arr[1], arr[0]);\n    });\n    grid.on('headerClicked', function(e, i) {\n      var sorts = grid.get('sorts');\n      var state = sorts[i];\n      var nstate;\n      if (e.original.ctrlKey && grid.get('multisortable')) {\n        nstate = 3;\n        if (!!!state || state > 2) nstate = 1;\n        else if (state === 1) nstate = 2;\n        if (nstate > 0 && nstate < 3) {\n          if (sorts.order.indexOf(i) < 0) sorts.order.push(i);\n        }\n        grid.set('sorts.' + i, nstate);\n      } else if (grid.get('sortable')) {\n        for (var s in sorts) {\n          if (s !== 'order') grid.set('sorts.' + s, 3);\n        }\n        nstate = 3;\n        if (!!!state || state > 2) nstate = 1;\n        else if (state === 1) nstate = 2;\n        else {\n          grid.set('sorts.order', []);\n        }\n        if (nstate > 0 && nstate < 3) grid.set('sorts.order', [i]);\n        grid.set('sorts.' + i, nstate);\n      }\n    });\n  },\n  data() {\n    return {\n      rendered: false,\n      editingRow(idx) {\n        return (this.get('editingRows') || []).indexOf(idx) >= 0;\n      },\n      sortDir(idx) {\n        return this.get('sorts')[idx];\n      },\n      columnClass(idx) {\n        return ((this.get('_columns') || [])[idx] || {}).class;\n      },\n      isCurrentRow(idx) {\n        return this.get('currentIndex') === idx;\n      },\n      editingRows: [],\n      _columns: undefined,\n      _filter: undefined,\n      items: undefined,\n      currentIndex: undefined,\n      sorts: { order: [] },\n      sortable: true,\n      multisortable: true,\n      table: true\n    };\n  },\n  computed: {\n    itemsView() {\n      var grd = this;\n      this.get('sorts');\n      var filter = this.get('_filter');\n      var sorts = this.get('sorting') || [];\n      var items = (this.get('items') || []).slice(0);\n      var columns = this.get('_columns') || [];\n      var flted, i;\n      if (typeof filter === 'function') {\n        flted = [];\n        for (i = 0; i < items.length; i++) {\n          if (filter(items[i])) flted.push(items[i]);\n        }\n        items = flted;\n      }\n      if (this.get('currentIndex') >= items.length) this.set('currentIndex', items.length - 1);\n      items.sort(function(a, b) {\n        for (var i in sorts) {\n          var s = sorts[i];\n          var dir = 1;\n          var ai = getProp(a, columns[s.field].path);\n          var bi = getProp(b, columns[s.field].path);\n\n          if (s.dir === 2) dir = -1;\n          else if (s.dir > 2) continue;\n\n          if (ai < bi) return -1 * dir;\n          else if (ai > bi) return 1 * dir;\n          else continue;\n        }\n        return 0;\n      });\n      return items;\n    },\n    current() {\n      var items = this.get('itemsView');\n      var idx = this.get('currentIndex');\n      if (typeof idx !== 'number') return null;\n      return (items || [])[idx];\n    },\n    sorting() {\n      var res = [];\n      var sorts = this.get('sorts');\n      var orders = sorts.order || [];\n      for (var i in orders) {\n        res.push({ field: orders[i], dir: sorts[orders[i]] });\n      }\n      return res;\n    },\n    headers() {\n      var cols = this.get('columnsView');\n      var res = [];\n      for (var i in cols) {\n        var c = cols[i];\n        if (!!c.label) res.push(c.label);\n        else if (!!!c.compute) {\n          var nm = c.path || 'Column ' + i;\n          res.push(nm.substring(nm.lastIndexOf('.') + 1));\n        } else res.push('Column ' + i);\n      }\n      return res;\n    },\n    columnsView() {\n      var cols = this.get('_columns');\n      if (cols === undefined) cols = this.columns(this.get('columns'));\n      if (cols === undefined) return [];\n      cols = cols.slice(0);\n      cols.sort(function(a, b) {\n        var ai = a.order || 0;\n        var bi = b.order || 0;\n        if (ai < bi) return -1;\n        else if (ai > bi) return 1;\n        else return 0;\n      });\n      return cols;\n    }\n  },\n  partials: {\n    tableRow: '',\n    divRow: '',\n    table: '',\n    div: ''\n  },\n  columns(arr) {\n    var i;\n    if (!arr) { // init columns from items\n      var items = this.get('items');\n      if (!!!items) return [];\n      var item = items.slice(0).pop();\n      var res = [];\n      if (!!item) {\n        var okTypes = ['String', 'Number', 'Boolean', 'Date'];\n        for (i in item) {\n          if (item.hasOwnProperty(i) && !!item[i]) {\n            var t = item[i].constructor.name;\n            if (okTypes.indexOf(t) >= 0) res.push({ label: i, path: i });\n          }\n        }\n      }\n      return this.columns(res);\n    } else {\n      for (i = 0; i < arr.length; i++) if (!arr[i].hasOwnProperty('order')) arr[i].order = i;\n      arr.sort(function(a, b) {\n        var ai = a.order;\n        var bi = b.order;\n        if (ai < bi) return -1;\n        else if (ai > bi) return 1;\n        else return 0;\n      });\n      this.set('_columns', arr);\n      var tstr = '', dstr = '';\n      for (var c = 0; c < arr.length; c++) {\n        tstr += `<td on-dblclick='colDoubleClicked:[{{i}},${c}]' class='{{columnClass(${c})}}'>`;\n        dstr += `<div on-dblclick='colDoubleClicked:[{{i}},${c}]' class='{{columnClass(${c})}}'>`;\n        if (arr[c].type === 'button' || arr[c].buttons) {\n          if (arr[c].buttons && Object.prototype.toString.call(arr[c].buttons) === '[object Array]') {\n            for (let b = 0; b < arr[c].buttons.length; b++) {\n              tstr += `<button ${arr[c].buttons[b].class ? `class=\"${arr[c].buttons[b].class}\"` : \"\"} on-click=\"clickButton(i, ${c}, ${b})\">${arr[c].buttons[b].label || arr[c].label}</button>`;\n              dstr += `<button ${arr[c].buttons[b].class ? `class=\"${arr[c].buttons[b].class}\"` : \"\"} on-click=\"clickButton(i, ${c}, ${b})\">${arr[c].buttons[b].label || arr[c].label}</button>`;\n            }\n          } else {\n            tstr += `<button ${arr[c].buttonClass ? `class=\"${arr[c].buttonClass}\"` : \"\"} on-click=\"clickButton(i, ${c})\">${arr[c].buttonLabel || arr[c].label}</button>`;\n            dstr += `<button ${arr[c].buttonClass ? `class=\"${arr[c].buttonClass}\"` : \"\"} on-click=\"clickButton(i, ${c})\">${arr[c].buttonLabel || arr[c].label}</button>`;\n          }\n        } else {\n          tstr += `{{${arr[c].path}}}`;\n          dstr += `{{${arr[c].path}}}`;\n        }\n        tstr += '</td>';\n        dstr += '</div>';\n      }\n      this.partials.tableRow = tstr;\n      this.partials.divRow = dstr;\n      this.set('rendered', false);\n      this.set('rendered', true);\n      return arr;\n    }\n  },\n  current(idx) {\n    if (arguments.length === 0) return this.get('current')();\n    var items = this.get('itemsView');\n    if (idx < 0 || idx >= items.length) return;\n    this.set('currentIndex', idx);\n    var tbl = this.get('table');\n\n    var n, p;\n    if (tbl) {\n      n = this.el.querySelector('tbody').children[idx];\n      p = this.el;\n    } else {\n      n = this.el.querySelector('.rg-body').children[idx];\n      if (n.style.overflow !== '') p = n;\n      else p = this.el;\n    }\n\n    if (n.offsetTop < p.scrollTop) p.scrollTop = n.offsetTop;\n    else if (n.offsetTop > p.scrollTop + p.clientHeight) p.scrollTop = (n.offsetTop - p.clientHeight / 2);\n  },\n  filter(fn) {\n    this.set('_filter', fn);\n    this.update('itemsView');\n  },\n  filterInputControl() {\n    var grid = this;\n    return function(e) {\n      var k = e.original.keyCode;\n      if (k === 13) {\n        var cur = grid.get('current');\n        if (!!cur) {\n          grid.fire('rowSelected', cur, null, null);\n          e.original.preventDefault();\n          return;\n        }\n      }\n      if (k === 38 || k === 40) {\n        e.original.preventDefault();\n        var current = grid.get('currentIndex');\n        if (typeof current !== 'number') current = k === 38 ? grid.get('itemsView').length - 1 : 0;\n        else current = k == 38 ? current - 1 : current + 1;\n        grid.current(current);\n        return;\n      }\n    };\n  },\n  clickButton(rown, coln, btnn) {\n    let col = this.get(`_columns.${coln}`), row = this.get(`itemsView.${rown}`);\n    if (col.buttons && col.buttons[btnn]) {\n      return col.buttons[btnn].action.call(this, row, rown, coln, btnn, col.buttons[btnn]);\n    } else {\n      return col.action.call(this, row, rown, coln);\n    }\n  }\n});\n\nexport default Grid;\n"],"names":[],"mappings":"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"}