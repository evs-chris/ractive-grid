{"version":3,"file":"index.js","sources":["../src/index.js"],"sourcesContent":["/* global Ractive */\n\nvar templateTable = `<table class='ractive-grid' on-keydown='selection' tabindex='0'|>\n  <thead>\n    <tr>{{#.headers:i}}<th on-click='headerClicked:{{i}}' class='{{#(sortDir(i) === 1)}}header-sort-asc{{/}}{{#(sortDir(i) === 2)}}header-sort-desc{{/}}'>{{.}}</th>{{/}}</tr>\n  </thead>\n  <tbody>\n    {{#.rendered}}\n      {{#.itemsView:i}}\n        <tr on-click='rowClicked:{{i}}' on-dblclick='rowDoubleClicked:{{i}}' class='{{#isCurrentRow(i)}}current{{/}}'>{{>tableRow}}</tr>\n      {{/}}\n    {{/}}\n  </tbody>\n</table>`;\n\nvar templateDiv = `<div class='ractive-grid' on-keydown='selection' tabindex='0'|>\n  <div class='rg-header'>{{#.headers:i}}<div on-click='headerClicked:{{i}}' class='{{#(sortDir(i) === 1)}}header-sort-asc{{/}}{{#(sortDir(i) === 2)}}header-sort-desc{{/}} {{columnClass(i)}}'>{{.}}</div>{{/}}</div>\n  <div class='rg-body'>\n    {{#.rendered}}\n      {{#.itemsView:i}}\n        <div class='rg-row{{#isCurrentRow(i)}} current{{/}}' on-dblclick='rowDoubleClicked:{{i}}' on-click='rowClicked:{{i}}' >{{>divRow}}</div>\n      {{/}}\n    {{/}}\n  </div>\n</div>`;\nvar getProp = function getProp(obj, path) {\n  if (!path) return '';\n  var parts = path.split('.');\n  for (var i = 0; i < parts.length; i++) {\n    if (!!!obj) return obj;\n    var p = parts[i];\n    obj = obj[p];\n  }\n  return obj;\n};\n\nvar Grid;\nGrid = Ractive.extend({\n  template: '{{>.type}}',\n  onconstruct(opts) {\n    var transfer = ['class', 'style', 'id'];\n    var str = '';\n    for (var k in opts.data) if (transfer.indexOf(k) >= 0) str += ' ' + k + '=\"' + opts.data[k] + '\"';\n    opts.partials = {};\n    opts.partials.table = templateTable.replace(/\\|/, str);\n    opts.partials.div = templateDiv.replace(/\\|/, str);\n    opts.data.sorts = { order: [] };\n    opts.data.type = opts.data.type || 'table';\n  },\n  onrender() {\n    var grid = this;\n    grid.on('rowDoubleClicked', function(e, i) {\n      grid.fire('rowSelected', grid.get('itemsView.' + i), i, e);\n    });\n    grid.on('rowClicked', function(e, i) {\n      grid.set('currentIndex', i);\n    });\n    grid.on('selection', function(e) {\n      var current = grid.get('currentIndex');\n      if (typeof current !== 'number') return;\n      var items = grid.get('itemsView');\n      if (e.original.keyCode === 38 && current > 0) current--;\n      else if (e.original.keyCode === 40) current++;\n      else if (e.original.keyCode === 13) {\n        grid.fire('rowSelected', grid.get('current'), current, e);\n        e.original.preventDefault();\n        return;\n      }\n      else return;\n      e.original.preventDefault();\n      grid.current(current);\n    });\n    grid.on('colDoubleClicked', function(e, arr) {\n      grid.fire('colSelected', e, grid.get('itemsView.' + arr[0]), arr[1], arr[0]);\n    });\n    grid.on('headerClicked', function(e, i) {\n      var sorts = grid.get('sorts');\n      var state = sorts[i];\n      var nstate;\n      if (e.original.ctrlKey && grid.get('multisortable')) {\n        nstate = 3;\n        if (!!!state || state > 2) nstate = 1;\n        else if (state === 1) nstate = 2;\n        if (nstate > 0 && nstate < 3) {\n          if (sorts.order.indexOf(i) < 0) sorts.order.push(i);\n        }\n        grid.set('sorts.' + i, nstate);\n      } else if (grid.get('sortable')) {\n        for (var s in sorts) {\n          if (s !== 'order') grid.set('sorts.' + s, 3);\n        }\n        nstate = 3;\n        if (!!!state || state > 2) nstate = 1;\n        else if (state === 1) nstate = 2;\n        else {\n          grid.set('sorts.order', []);\n        }\n        if (nstate > 0 && nstate < 3) grid.set('sorts.order', [i]);\n        grid.set('sorts.' + i, nstate);\n      }\n    });\n  },\n  data() {\n    return {\n      rendered: false,\n      editingRow(idx) {\n        return (this.get('editingRows') || []).indexOf(idx) >= 0;\n      },\n      sortDir(idx) {\n        return this.get('sorts')[idx];\n      },\n      columnClass(idx) {\n        return ((this.get('_columns') || [])[idx] || {}).class;\n      },\n      isCurrentRow(idx) {\n        return this.get('currentIndex') === idx;\n      },\n      editingRows: [],\n      _columns: undefined,\n      _filter: undefined,\n      items: undefined,\n      currentIndex: undefined,\n      sorts: { order: [] },\n      sortable: true,\n      multisortable: true,\n      table: true\n    };\n  },\n  computed: {\n    itemsView() {\n      var grd = this;\n      this.get('sorts');\n      var filter = this.get('_filter');\n      var sorts = this.get('sorting') || [];\n      var items = (this.get('items') || []).slice(0);\n      var columns = this.get('_columns') || [];\n      var flted, i;\n      if (typeof filter === 'function') {\n        flted = [];\n        for (i = 0; i < items.length; i++) {\n          if (filter(items[i])) flted.push(items[i]);\n        }\n        items = flted;\n      }\n      if (this.get('currentIndex') >= items.length) this.set('currentIndex', items.length - 1);\n      items.sort(function(a, b) {\n        for (var i in sorts) {\n          var s = sorts[i];\n          var dir = 1;\n          var ai = getProp(a, columns[s.field].path);\n          var bi = getProp(b, columns[s.field].path);\n\n          if (s.dir === 2) dir = -1;\n          else if (s.dir > 2) continue;\n\n          if (ai < bi) return -1 * dir;\n          else if (ai > bi) return 1 * dir;\n          else continue;\n        }\n        return 0;\n      });\n      return items;\n    },\n    current() {\n      var items = this.get('itemsView');\n      var idx = this.get('currentIndex');\n      if (typeof idx !== 'number') return null;\n      return (items || [])[idx];\n    },\n    sorting() {\n      var res = [];\n      var sorts = this.get('sorts');\n      var orders = sorts.order || [];\n      for (var i in orders) {\n        res.push({ field: orders[i], dir: sorts[orders[i]] });\n      }\n      return res;\n    },\n    headers() {\n      var cols = this.get('columnsView');\n      var res = [];\n      for (var i in cols) {\n        var c = cols[i];\n        if (!!c.label) res.push(c.label);\n        else if (!!!c.compute) {\n          var nm = c.path || 'Column ' + i;\n          res.push(nm.substring(nm.lastIndexOf('.') + 1));\n        } else res.push('Column ' + i);\n      }\n      return res;\n    },\n    columnsView() {\n      var cols = this.get('_columns');\n      if (cols === undefined) cols = this.columns(this.get('columns'));\n      if (cols === undefined) return [];\n      cols = cols.slice(0);\n      cols.sort(function(a, b) {\n        var ai = a.order || 0;\n        var bi = b.order || 0;\n        if (ai < bi) return -1;\n        else if (ai > bi) return 1;\n        else return 0;\n      });\n      return cols;\n    }\n  },\n  partials: {\n    tableRow: '',\n    divRow: '',\n    table: '',\n    div: ''\n  },\n  columns(arr) {\n    var i;\n    if (!arr) { // init columns from items\n      var items = this.get('items');\n      if (!!!items) return [];\n      var item = items.slice(0).pop();\n      var res = [];\n      if (!!item) {\n        var okTypes = ['String', 'Number', 'Boolean', 'Date'];\n        for (i in item) {\n          if (item.hasOwnProperty(i) && !!item[i]) {\n            var t = item[i].constructor.name;\n            if (okTypes.indexOf(t) >= 0) res.push({ label: i, path: i });\n          }\n        }\n      }\n      return this.columns(res);\n    } else {\n      for (i = 0; i < arr.length; i++) if (!arr[i].hasOwnProperty('order')) arr[i].order = i;\n      arr.sort(function(a, b) {\n        var ai = a.order;\n        var bi = b.order;\n        if (ai < bi) return -1;\n        else if (ai > bi) return 1;\n        else return 0;\n      });\n      this.set('_columns', arr);\n      var tstr = '', dstr = '';\n      for (var c = 0; c < arr.length; c++) {\n        tstr += `<td on-dblclick='colDoubleClicked:[{{i}},${c}]' class='{{columnClass(${c})}}'>`;\n        dstr += `<div on-dblclick='colDoubleClicked:[{{i}},${c}]' class='{{columnClass(${c})}}'>`;\n        if (arr[c].type === 'button' || arr[c].buttons) {\n          if (arr[c].buttons && Object.prototype.toString.call(arr[c].buttons) === '[object Array]') {\n            for (let b = 0; b < arr[c].buttons.length; b++) {\n              tstr += `<button ${arr[c].buttons[b].class ? `class=\"${arr[c].buttons[b].class}\"` : \"\"} on-click=\"clickButton(i, ${c}, ${b})\">${arr[c].buttons[b].label || arr[c].label}</button>`;\n              dstr += `<button ${arr[c].buttons[b].class ? `class=\"${arr[c].buttons[b].class}\"` : \"\"} on-click=\"clickButton(i, ${c}, ${b})\">${arr[c].buttons[b].label || arr[c].label}</button>`;\n            }\n          } else {\n            tstr += `<button ${arr[c].buttonClass ? `class=\"${arr[c].buttonClass}\"` : \"\"} on-click=\"clickButton(i, ${c})\">${arr[c].buttonLabel || arr[c].label}</button>`;\n            dstr += `<button ${arr[c].buttonClass ? `class=\"${arr[c].buttonClass}\"` : \"\"} on-click=\"clickButton(i, ${c})\">${arr[c].buttonLabel || arr[c].label}</button>`;\n          }\n        } else {\n          tstr += `{{${arr[c].path}}}`;\n          dstr += `{{${arr[c].path}}}`;\n        }\n        tstr += '</td>';\n        dstr += '</div>';\n      }\n      this.partials.tableRow = tstr;\n      this.partials.divRow = dstr;\n      this.set('rendered', false);\n      this.set('rendered', true);\n      return arr;\n    }\n  },\n  current(idx) {\n    if (arguments.length === 0) return this.get('current')();\n    var items = this.get('itemsView');\n    if (idx < 0 || idx >= items.length) return;\n    this.set('currentIndex', idx);\n    var tbl = this.get('table');\n\n    var n, p;\n    if (tbl) {\n      n = this.el.querySelector('tbody').children[idx];\n      p = this.el;\n    } else {\n      n = this.el.querySelector('.rg-body').children[idx];\n      if (n.style.overflow !== '') p = n;\n      else p = this.el;\n    }\n\n    if (n.offsetTop < p.scrollTop) p.scrollTop = n.offsetTop;\n    else if (n.offsetTop > p.scrollTop + p.clientHeight) p.scrollTop = (n.offsetTop - p.clientHeight / 2);\n  },\n  filter(fn) {\n    this.set('_filter', fn);\n    this.update('itemsView');\n  },\n  filterInputControl() {\n    var grid = this;\n    return function(e) {\n      var k = e.original.keyCode;\n      if (k === 13) {\n        var cur = grid.get('current');\n        if (!!cur) {\n          grid.fire('rowSelected', cur, null, null);\n          e.original.preventDefault();\n          return;\n        }\n      }\n      if (k === 38 || k === 40) {\n        e.original.preventDefault();\n        var current = grid.get('currentIndex');\n        if (typeof current !== 'number') current = k === 38 ? grid.get('itemsView').length - 1 : 0;\n        else current = k == 38 ? current - 1 : current + 1;\n        grid.current(current);\n        return;\n      }\n    };\n  },\n  clickButton(rown, coln, btnn) {\n    let col = this.get(`_columns.${coln}`), row = this.get(`itemsView.${rown}`);\n    if (col.buttons && col.buttons[btnn]) {\n      return col.buttons[btnn].action.call(this, row, rown, coln, btnn, col.buttons[btnn]);\n    } else {\n      return col.action.call(this, row, rown, coln);\n    }\n  }\n});\n\nexport default Grid;\n"],"names":[],"mappings":"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"}